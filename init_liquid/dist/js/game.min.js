(function e(t,i,s){function n(o,r){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require;if(!r&&h)return h(o,!0);if(a)return a(o,!0);throw Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return n(i?i:e)},u,u.exports,e,t,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;s.length>o;o++)n(s[o]);return n})({1:[function(t){"use strict";window.onload=function(){var e=new Phaser.Game(640,832,Phaser.AUTO,"init");e.state.add("boot",t("./states/boot")),e.state.add("level",t("./states/level")),e.state.add("levelsmenu",t("./states/levelsmenu")),e.state.add("menu",t("./states/menu")),e.state.add("preload",t("./states/preload")),e.state.start("boot")}},{"./states/boot":9,"./states/level":10,"./states/levelsmenu":11,"./states/menu":12,"./states/preload":13}],2:[function(t,e){var i=t("./simplebutton"),s=function(t,e,i){Phaser.Group.call(this,t,e,"Level Complete Board"),this.levels_num=28,this.levelNumber=i,this.addBack(),this.addButtons(),this.board=this.game.add.image(-10,250,"bggroup","levelcomplete.png",this)};s.prototype=Object.create(Phaser.Group.prototype),s.prototype.constructor=s,s.prototype.addBack=function(){var t=this.game.add.graphics(0,0,this);t.beginFill(0,.5),t.drawRect(0,0,this.game.width,this.game.height),t.endFill()},s.prototype.addButtons=function(){var t=this,e=550,s=120,n=new i(this.game,this.game.width/2,e,"buttonsgroup","restart.png");n.callback.addOnce(function(){t.game.state.start("level",!0,!1,t.levelNumber)},this);var a=new i(this.game,n.x-s,e,"buttonsgroup","menu.png");a.callback.addOnce(function(){t.game.state.start("levelsmenu")},this);var o=new i(this.game,n.x+s+.25,e,"buttonsgroup","play76.png");o.callback.addOnce(function(){t.levelNumber===this.levels_num?t.game.state.start("levelsmenu"):t.game.state.start("level",!0,!1,t.levelNumber+1)},this),this.buttons=[a,n,o],this.buttons.forEach(function(e){t.add(e)})},s.prototype.show=function(){var t=this;this.visible=!0,this.board.y-=200,this.board.alpha=0;var e=500;this.game.add.tween(this.board).to({alpha:1},200,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.board).to({y:this.board.y+200},e,Phaser.Easing.Back.Out,!0);var i=e;this.buttons.forEach(function(s){s.y-=200,s.visible=!1,t.game.add.tween(s).to({y:s.y+200},e,Phaser.Easing.Back.Out,!0,i).onStart.addOnce(function(){s.visible=!0},t),i+=100})},e.exports=s},{"./simplebutton":7}],3:[function(t,e){var i=t("./simplebutton"),s=t("./levelcompleteboard"),n=function(t,e){Phaser.Group.call(this,t,t.world,"gui"),this.levelSettings=e,this.initLevelCompleteBoard(),this.initButtons()};n.prototype=Object.create(Phaser.Group.prototype),n.prototype.constructor=n,n.prototype.initButtons=function(){var t=this,e=60,s=new i(this.game,this.game.width-160,e,"buttonsgroup","restart.png");s.callback.addOnce(function(){t.game.state.start("level",!0,!1,t.levelSettings.levelNumber)},this);var n=new i(this.game,this.game.width-60,e,"buttonsgroup","menu.png");n.callback.addOnce(function(){t.game.state.start("levelsmenu")}),this.buttons=[s,n],this.buttons.forEach(function(e){t.add(e)})},n.prototype.initLevelCompleteBoard=function(){this.levelCompleteBoard=new s(this.game,this,this.levelSettings.levelNumber),this.levelCompleteBoard.visible=!1},n.prototype.onLevelComplete=function(){this.buttons.forEach(function(t){t.visible=!1}),this.levelCompleteBoard.show()},e.exports=n},{"./levelcompleteboard":2,"./simplebutton":7}],4:[function(t,e){"use strict";var i=function(t,e,i,s,n){Phaser.Image.call(this,t,e,i,"buttonsgroup","button.png"),n===void 0&&(n=!1);var a=this;this.inputEnabled=!n,this.locked=n,this._levelNumber=s,this.anchor.set(.5,.5),this.createGraphics(),this.inputEnabled&&(this.game.device.desktop&&(this.input.useHandCursor=!0),this.events.onInputDown.add(function(){a.game.sound.play("tap",.75),a.tint*=.995,a.game.add.tween(a.scale).to({x:.9,y:.9},200,Phaser.Easing.Cubic.Out,!0)}),this.events.onInputUp.add(function(){a.tint=16777215,a.game.add.tween(a.scale).to({x:1,y:1},200,Phaser.Easing.Cubic.Out,!0)})),Object.defineProperty(this,"levelNumber",{get:function(){return this._levelNumber},enumerable:!0,configurable:!0})};i.prototype=Object.create(Phaser.Image.prototype),i.prototype.constructor=i,i.prototype.createGraphics=function(){this.locked?this.createLockedGraphics():this.createUnlockedGraphics()},i.prototype.createLockedGraphics=function(){this.loadTexture("buttonsgroup","buttonlock.png")},i.prototype.createUnlockedGraphics=function(){var t={font:"48px TF2 Build",fill:"#218DB7",align:"center"},e=this.game.add.text(0,0,""+this._levelNumber,t);e.anchor.set(.5,.5);var i=this.game.add.renderTexture(this.width,this.height);i.renderXY(this,.5*this.width,.5*this.height),i.renderXY(e,Math.floor(.5*this.width),Math.floor(.5*this.height)-1),this.setTexture(i),e.destroy()},e.exports=i},{}],5:[function(t,e){"use strict";var i=function(t){return this._levelNumber=t,Object.defineProperty(this,"levelNumber",{get:function(){return this._levelNumber},enumerable:!0,configurable:!0})};e.exports=i},{}],6:[function(t,e){"use strict";var i=function(t){return this._levelNumber=t,Object.defineProperty(this,"levelNumber",{get:function(){return this._levelNumber},enumerable:!0,configurable:!0})};e.exports=i},{}],7:[function(t,e){"use strict";var i=function(t,e,i,s,n){Phaser.Image.call(this,t,e,i,s,n);var a=this;this.callbackDelay=20,this.callbackTimer=0,this.clicked=!1,this._callback=new Phaser.Signal,this.anchor.set(.5,.5),this.inputEnabled=!0,this.game.device.desktop&&(this.input.useHandCursor=!0),this.inputEnabled&&this.events.onInputDown.add(function(){a.game.device.webAudio&&a.game.sound.play("tap"),a.game.add.tween(a.scale).to({x:1.2,y:.8},200,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){a.clicked=!0,a.callbackTimer=0,a.game.add.tween(a.scale).to({x:1,y:1},200,Phaser.Easing.Back.Out,!0)},a)}),Object.defineProperty(this,"callback",{get:function(){return this._callback},enumerable:!0,configurable:!0})};i.prototype=Object.create(Phaser.Image.prototype),i.prototype.constructor=i,i.prototype.update=function(){this.clicked&&(this.callbackTimer+=this.game.time.elapsed,this.callbackTimer>=this.callbackDelay&&(this._callback.dispatch(),this.clicked=!1,this.callbackTimer=0))},i.prototype.setCallbackDelay=function(t){this.callbackDelay=t},e.exports=i},{}],8:[function(t,e){"use strict";var i=t("./simplebutton"),s=function(t,e,s,n,a,o){i.call(this,t,e,s,n,a),this.spriteSheet=n,this.textureKey1=a,this.textureKey2=o,this.activeTextureKey=this.textureKey1,this._state=1,this.events.onInputUp.add(this.switchTextures,this,2),Object.defineProperty(this,"state",{get:function(){return this._state},enumerable:!0,configurable:!0})};s.prototype=Object.create(Phaser.Image.prototype),s.prototype.constructor=s,s.prototype.switchTextures=function(){this.activeTextureKey=this.activeTextureKey===this.textureKey1?this.textureKey2:this.textureKey1,this.loadTexture(this.spriteSheet,this.activeTextureKey),this._state=this.activeTextureKey===this.textureKey1?1:2},e.exports=s},{"./simplebutton":7}],9:[function(t,e){"use strict";function i(){}i.prototype={preload:function(){this.load.image("LoadingBar_Outer","assets/LoadingBar_Outer.png"),this.load.image("LoadingBar_Inner","assets/LoadingBar_Inner.png")},create:function(){this.setupStage(),this.detectWeakDevice(),this.game.input.maxPointers=1,this.game.state.start("preload")},setupStage:function(){var t=this.game.scale;t.scaleMode=Phaser.ScaleManager.SHOW_ALL,t.minWidth=.25*this.game.world.width,t.minHeight=.25*this.game.world.height,t.aspectRatio=this.game.world.width/this.game.world.width,t.pageAlignHorizontally=!0,t.pageAlignVertically=!0,this.game.device.desktop||t.forceOrientation(!1,!0),t.enterIncorrectOrientation.add(this.onEnterIncorrectOrientation,this),t.leaveIncorrectOrientation.add(this.onLeaveIncorrectOrientation,this),t.setScreenSize(!0),this.stage.disableVisibilityChange=!0,this.stage.backgroundColor=11193204},detectWeakDevice:function(){var t=!1;if(this.game.device.desktop===!1){var e=detect.parse(window.navigator.userAgent);this.game.device.iOS&&(7>e.os.major&&(t=!0),e.browser.family.indexOf("Chrome")>-1&&(t=!0)),this.game.device.android&&(e.browser.family.indexOf("Android")>-1&&(t=!0),e.browser.family.indexOf("Chrome Mobile")>-1&&18>=e.browser.major&&(t=!0)),this.game.device.windowsPhone&&e.browser.family.indexOf("IE")>-1&&(t=10>e.browser.major)}},onEnterIncorrectOrientation:function(){document.getElementById("orientation").style.display="block",document.body.style.marginBottom="0px"},onLeaveIncorrectOrientation:function(){document.getElementById("orientation").style.display="none",document.body.style.marginBottom="100px",this.game.device.android&&!this.game.device.chrome&&this.game.scale.setScreenSize(!0),this.game.time.events.repeat(500,3,this.game.scale.setScreenSize,this)}},e.exports=i},{}],10:[function(t,e){function i(){}var s,n=t("../prefabs/levelsettings"),a=t("../prefabs/levelresult"),o=t("../prefabs/levelgui"),r=t("../prefabs/simplebutton");!function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED",t[t.RESTART=2]="RESTART"}(s||(s={})),Object.defineProperty(this,"settings",{get:function(){return this._settings},enumerable:!0,configurable:!0}),i.prototype={init:function(t){this.state=1,this._settings=new n(t),this.result=new a(t)},create:function(){this.levels_num=28,this.game.add.text(100,100,""+this._settings.levelNumber);var t=new r(this.game,200,200,"buttonsgroup","play76.png");this.world.add(t),t.callback.addOnce(this.levelComplete,this),this.addGui()},update:function(){switch(this.state){case 0:this.doUpdate();break;case 2:this.doRestart(),this.state=0}},addGui:function(){this.gui=new o(this.game,this._settings)},gotoPrevLevel:function(){var t=this._settings.levelNumber;c=1===t?this.levels_num:t-1,this.gotoLevel(c)},gotoNextLevel:function(){var t=this._settings.levelNumber;c=t>=this.levels_num?1:t+1,this.gotoLevel(c)},gotoLevel:function(t){this.game.state.start("level",!0,!1,t)},restart:function(){this.state=2},gotoChooseLevelMenu:function(){this.game.state.start("levelsmenu",!0,!1)},togglePause:function(){this.game.paused=!this.game.paused,this.game.paused?this.onPause():this.onResume()},onPause:function(){this.state=1},onResume:function(){this.state=1},doRestart:function(){this.gotoLevel(this._settings.levelNumber)},doUpdate:function(){},levelComplete:function(){this.saveLevelResult(),this.gui.onLevelComplete()},saveLevelResult:function(){window.localStorage.setItem(""+this._settings.levelNumber,"true")},shutdown:function(){}},e.exports=i},{"../prefabs/levelgui":3,"../prefabs/levelresult":5,"../prefabs/levelsettings":6,"../prefabs/simplebutton":7}],11:[function(t,e){function i(){}var s=t("../prefabs/levelicon"),n=t("../prefabs/simplebutton"),a=t("../prefabs/togglebutton");i.prototype={create:function(){this.levels_num=28,this.game.add.image(0,0,"bggroup","bg.png"),this.initLevelIcons(),this.initButtons(),this.initAnimations()},initLevelIcons:function(){this.levelIconsGroup=this.game.add.group(this.game.world,"LevelIcons Container"),this.levelIconsGroup.x=85,this.levelIconsGroup.y=150;for(var t=118,e=118,i=59,n=0,a=1;this.levels_num>=a;a++){var o=a,r=this.levelIsLocked(o),h=new s(this.game,i-.5,n,o,r);r===!1&&h.events.onInputUp.add(this.onLevelIconInputUp,this,2),this.levelIconsGroup.add(h),i+=t,4===a&&(i=0,n+=e),a>4&&0===(a-4)%5&&(i=0,n+=e),24===a&&(i=59)}},levelIsLocked:function(t){if(1===t)return!1;var e=t-1;return!("true"===window.localStorage.getItem(""+e))},onLevelIconInputUp:function(t){var e=this;this.game.time.events.add(200,function(){var i=t.levelNumber;e.game.state.start("level",!0,!1,i)},this)},initButtons:function(){var t=this,e=60;this.backButton=new n(this.game,e,e,"buttonsgroup","home.png"),this.backButton.callback.addOnce(function(){t.game.state.start("menu")},this),this.world.add(this.backButton),this.soundButton=new a(this.game,this.game.width-e,e,"buttonsgroup","sound.png","mute.png"),this.soundButton.callback.add(function(){t.game.sound.mute=!t.game.sound.mute}),this.game.sound.mute&&this.soundButton.switchTextures(),this.world.add(this.soundButton)},initAnimations:function(){this.levelIconsGroup.alpha=0,this.levelIconsGroup.y+=200,this.game.add.tween(this.levelIconsGroup).to({y:this.levelIconsGroup.y-200,alpha:1},600,Phaser.Easing.Back.Out,!0,300),this.backButton.x-=300,this.game.add.tween(this.backButton).to({x:this.backButton.x+300},300,Phaser.Easing.Back.Out,!0,700),this.soundButton.x+=300,this.game.add.tween(this.soundButton).to({x:this.soundButton.x-300},300,Phaser.Easing.Back.Out,!0,700)},shutdown:function(){this.levelIconsGroup.destroy(),this.backButton.destroy(),this.soundButton.destroy()}},e.exports=i},{"../prefabs/levelicon":4,"../prefabs/simplebutton":7,"../prefabs/togglebutton":8}],12:[function(t,e){function i(){this.fromPreloader=!1}var s=t("../prefabs/simplebutton"),n=t("../prefabs/togglebutton");i.prototype={preload:function(){},create:function(){this.addBackground(),this.addTitle(),this.addOtherImages(),this.addButtons(),this.initCredits(),this.initAnimation(),this.fromPreloader&&(this.soundButton.input.enabled=!1,this.soundButton.switchTextures(),this.game.input.onTap.addOnce(this.startMusic,this),this.stage.disableVisibilityChange=!1,this.game.onBlur.add(this.onFocusLost,this),this.game.onFocus.add(this.onFocus,this))},update:function(){},onFocusLost:function(){this.game.tweens.pauseAll(),this.game.sound.mute=!0},onFocus:function(){this.game.tweens.resumeAll(),this.game.sound.mute=!1},addBackground:function(){this.game.add.image(0,0,"bggroup","bg.png")},addTitle:function(){var t={font:"bold 75px cantoraone",fill:"#FFA500",stroke:"#808080",strokeThickness:1,align:"center"},e="GAME TITLE";this.titleText=this.game.add.text(0,0,""+e,t),this.titleText.anchor.set(.5,.5),this.titleText.position.set(this.game.width/2,130),this.titleText.setShadow(7,5,"#F5F5F5",5)},addOtherImages:function(){this.panda=this.game.add.image(this.game.width/2,this.game.height-50,"panda","Panda0000"),this.panda.anchor.set(.5,1),this.panda.angle=-1},addButtons:function(){var t=this,e=this.game.width/2-50,i=140;this.playButton=new s(this.game,this.game.width/2,e,"buttonsgroup","play.png"),this.playButton.setCallbackDelay(250),this.playButton.callback.addOnce(this.hideAndStartGame,this),this.creditsButton=new s(this.game,this.playButton.x+i,this.playButton.y,"buttonsgroup","credit.png"),this.creditsButton.callback.add(this.toggleCredits,this),this.soundButton=new n(this.game,this.playButton.x-i,this.playButton.y,"buttonsgroup","sound.png","mute.png"),this.soundButton.callback.add(function(){t.game.sound.mute=!t.game.sound.mute}),this.game.sound.mute&&this.soundButton.switchTextures(),this.moreGamesButton=new s(this.game,this.playButton.x+i,this.playButton.y,"buttonsgroup","button.png"),this.moreGamesButton.callback.add(this.onMoreGamesClick,this),this.moreGamesButton.visible=!1,this.moreGamesButton.exists=!1,this.buttons=[this.playButton,this.soundButton,this.creditsButton],this.buttons.forEach(function(e){t.world.add(e)})},hideAndStartGame:function(){this.playButton.input.enabled=!1,this.playButton.inputEnabled=!1,this.game.state.start("levelsmenu")},onMoreGamesClick:function(){window.open("http://play.nguoianphu.com","_blank")},initCredits:function(){this.credits=this.game.add.image(0,0,"bggroup","creditbg.png"),this.credits.position.set(Math.round(.5*(this.game.width-this.credits.width)),Math.round(.5*(this.game.height-this.credits.height))),this.credits.visible=!1;var t={font:"45px cantoraone",fill:"#fff",stroke:"#000",strokeThickness:1,align:"center"},e="Hello\nPhaser is very good!\nLet's go!";this.creditText=this.game.add.text(0,0,""+e,t),this.creditText.anchor.set(.5,.5),this.creditText.position.set(this.game.width/2,this.game.height/2),this.creditText.setShadow(2,2,"#666666",2),this.creditText.visible=!1},toggleCredits:function(){this.credits.visible?this.hideCredits():this.showCredits()},hideCredits:function(){var t=this;this.game.add.tween(this.creditText).to({y:this.creditText.y+200,alpha:0},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.credits).to({y:this.credits.y+200,alpha:0},500,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){t.playButton.input.enabled=!0,t.creditsButton.input.enabled=!0,t.credits.visible=!1,t.creditText.visible=!1},this)},showCredits:function(){this.credits.visible=!0,this.creditText.visible=!0,this.credits.alpha=0,this.credits.y=Math.round(.5*(this.game.width-this.credits.height))+200,this.creditText.y=Math.round(.5*(this.game.width-this.creditText.height))+200,this.game.add.tween(this.credits).to({y:this.credits.y-200,alpha:1},500,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.creditText).to({y:this.creditText.y-200,alpha:1},500,Phaser.Easing.Back.Out,!0),this.playButton.input.enabled=!1,this.creditsButton.input.enabled=!1,this.game.input.onTap.addOnce(function(){this.hideCredits()},this)},initAnimation:function(){var t=this;this.titleText.y-=250,this.titleText.scale.set(0,1),this.game.add.tween(this.titleText).to({y:this.titleText.y+250},600,Phaser.Easing.Back.Out,!0,300),this.game.add.tween(this.titleText.scale).to({x:1},600,Phaser.Easing.Back.Out,!0,500).onComplete.addOnce(this.onTitleAnimationComplete,this),this.panda.scale.set(0,0),this.game.add.tween(this.panda.scale).to({x:.85,y:.85},500,Phaser.Easing.Back.Out,!0,1200).onComplete.addOnce(this.onPandaAnimationComplete,this);var e=1500;this.buttons.forEach(function(i){i.scale.set(0,0),t.game.add.tween(i.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,e),e+=200}),this.game.time.events.repeat(2e3,1e3,this.shakePlayButton,this)},shakePlayButton:function(){this.game.add.tween(this.playButton.scale).to({x:1.1,y:.9},150,Phaser.Easing.Cubic.Out,!0,0,3,!0)},onTitleAnimationComplete:function(){this.game.add.tween(this.titleText.scale).to({x:1.1,y:.9},600,Phaser.Easing.Sinusoidal.Out,!0,0,1e4,!0)},onPandaAnimationComplete:function(){this.game.add.tween(this.panda.scale).to({y:.88},600,Phaser.Easing.Sinusoidal.Out,!0,0,1e4,!0),this.game.add.tween(this.panda).to({angle:1},1200,Phaser.Easing.Sinusoidal.Out,!0,0,1e4,!0)},shutdown:function(){this.titleText.destroy(),this.panda.destroy(),this.credits.destroy(),this.creditText.destroy(),this.buttons=null}},e.exports=i},{"../prefabs/simplebutton":7,"../prefabs/togglebutton":8}],13:[function(t,e){"use strict";function i(){}i.prototype={preload:function(){this.initPreloadBar(),this.addLoadingText(),this.loadAssets()},create:function(){this.game.state.start("menu",!0,!1,!0)},update:function(){},initPreloadBar:function(){this.LoadingBar_Outer=this.add.image(0,0,"LoadingBar_Outer"),this.LoadingBar_Inner=this.add.sprite(0,0,"LoadingBar_Inner"),this.LoadingBar_Outer.anchor.set(.5,.5),this.LoadingBar_Outer.x=this.game.width/2-.5,this.LoadingBar_Outer.y=this.game.height/2,this.LoadingBar_Inner.x=this.game.width/2-.5-this.LoadingBar_Inner.width/2,this.LoadingBar_Inner.y=this.game.height/2-this.LoadingBar_Inner.height/2-1.5,this.load.setPreloadSprite(this.LoadingBar_Inner)},addLoadingText:function(){var t={font:"45px cantoraone",fill:"#FFFFFF",align:"center"};this.loadingText=this.game.add.text(0,0,"0%",t),this.loadingText.anchor.set(.5,.5),this.loadingText.position.set(this.game.world.width/2,this.game.world.height/2+180),this.loadingText.setShadow(2,2,"#666666",2),this.loadingText.update()},loadAssets:function(){this.load.bitmapFont("cantoraone","assets/fonts/cantoraone.png","assets/fonts/cantoraone.fnt",null,1),this.load.atlas("buttonsgroup","assets/graphics/buttonsgroup.png","assets/graphics/buttonsgroup.json"),this.load.atlas("bggroup","assets/graphics/bggroup.png","assets/graphics/bggroup.json"),this.load.atlasJSONHash("panda","assets/graphics/panda.png","assets/graphics/panda.json")},loadUpdate:function(){this.loadingText.setText(""+this.load.progress+"%")}},e.exports=i},{}]},{},[1]);